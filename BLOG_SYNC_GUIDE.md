# 博客内容同步系统使用指南

## 🎉 系统简介

博客内容同步系统让您可以通过简单的 Markdown 文件管理博客内容，无需手动编辑代码文件。系统会自动：

- 读取 `content/blog/` 目录下的所有 `.md` 文件
- 解析 Front Matter 元数据
- 自动生成博客数据文件
- 支持标签和分类统计
- 自动计算阅读时间

## 🚀 快速开始

### 1. 添加新文章

1. 在 `content/blog/` 目录下创建新的 `.md` 文件
2. 使用 `_template.md` 作为模板
3. 编写您的文章内容
4. 运行同步命令

### 2. 同步博客内容

```bash
# 方法1: 使用 npm 脚本（推荐）
npm run sync-blog

# 方法2: 直接运行脚本
node scripts/sync-blog.js

# 方法3: 构建时自动同步
npm run build-with-blog
```

### 3. 查看更新

重启开发服务器后，您的新文章将出现在博客系统中。

## 📝 Front Matter 配置

每个 Markdown 文件都需要包含 Front Matter 元数据：

```yaml
---
title: "文章标题"                    # 必需 - 文章标题
description: "文章描述"              # 可选 - 文章摘要，会自动生成如果未提供
date: "2024-01-01"                  # 可选 - 发布日期，默认为当前日期
lastModified: "2024-01-01"          # 可选 - 最后修改日期
author: "作者名称"                   # 可选 - 作者，默认为 "Garden Expert"
tags: ["标签1", "标签2"]            # 可选 - 文章标签数组
category: "游戏指南"                 # 可选 - 文章分类，默认为 "游戏指南"
cover: "/blog/images/cover.jpg"     # 可选 - 封面图片路径
featured: false                     # 可选 - 是否为精选文章
readTime: 5                         # 可选 - 阅读时间（分钟），会自动计算
views: 100                          # 可选 - 浏览量，会随机生成
---
```

### 字段说明

| 字段 | 类型 | 必需 | 默认值 | 说明 |
|------|------|------|--------|------|
| `title` | string | ✅ | 文件名 | 文章标题 |
| `description` | string | ❌ | 自动提取 | 文章摘要，显示在列表中 |
| `date` | string | ❌ | 当前日期 | 发布日期 (YYYY-MM-DD) |
| `lastModified` | string | ❌ | 发布日期 | 最后修改日期 |
| `author` | string | ❌ | "Garden Expert" | 作者名称 |
| `tags` | array | ❌ | [] | 标签数组 |
| `category` | string | ❌ | "游戏指南" | 文章分类 |
| `cover` | string | ❌ | 自动生成 | 封面图片路径 |
| `featured` | boolean | ❌ | false | 是否为精选文章 |
| `readTime` | number | ❌ | 自动计算 | 预估阅读时间（分钟） |
| `views` | number | ❌ | 随机值 | 文章浏览量 |

## 📂 文件组织

### 目录结构
```
content/blog/
├── _template.md                    # 文章模板
├── grow-garden-guide.md            # 示例文章1
├── mutation-strategies.md          # 示例文章2
└── your-new-article.md            # 您的新文章
```

### 文件命名规范
- 使用小写字母和连字符
- 避免空格和特殊字符
- 文件名会自动转换为 URL slug
- 示例：`grow-garden-guide.md` → `/blog/grow-garden-guide`

## 🏷️ 标签和分类

### 预定义分类
- `游戏指南` - 基础游戏机制和新手指导
- `进阶攻略` - 高级策略和优化技巧
- `技术分析` - 深度数据分析和计算
- `游戏资讯` - 最新更新和版本信息
- `深度分析` - 经济学和投资策略分析

### 常用标签
- `新手指南` - 适合新手的内容
- `游戏攻略` - 游戏策略和技巧
- `作物种植` - 作物相关内容
- `突变系统` - 突变机制解析
- `收益优化` - 利润最大化策略
- `投资策略` - 投资和资金管理
- `数据分析` - 数据驱动的分析

## 🔧 高级功能

### 自动阅读时间计算
系统会根据文章内容自动计算阅读时间：
- 中文：300字/分钟
- 英文：200词/分钟
- 会排除代码块和 Markdown 语法

### 自动摘要生成
如果未提供 `description`，系统会：
1. 优先使用 `excerpt` 字段
2. 自动提取文章前150个字符
3. 移除 Markdown 语法标记

### 标签颜色自动分配
系统会根据标签名称自动分配颜色：
- 使用哈希算法确保一致性
- 8种预定义颜色方案
- 自动适配深色主题

## 🎯 最佳实践

### 1. 文章结构
```markdown
# 主标题

简介段落...

## 🌟 主要内容

### 子标题1
内容...

### 子标题2
内容...

## 📊 数据分析
图表和数据...

## 🎯 总结
总结内容...
```

### 2. 图片使用
```markdown
![图片描述](/blog/images/your-image.jpg)
```

### 3. 代码块
```markdown
```javascript
// 代码示例
function example() {
  return "Hello World";
}
```

### 4. 表格格式
```markdown
| 列1 | 列2 | 列3 |
|-----|-----|-----|
| 数据1 | 数据2 | 数据3 |
```

## 🚨 注意事项

### 文件要求
- 文件必须以 `.md` 扩展名结尾
- 必须包含有效的 Front Matter
- 文件编码必须为 UTF-8

### 同步时机
- 添加新文章后必须运行同步命令
- 修改现有文章后需要重新同步
- 构建生产版本前建议同步

### 错误处理
- 无效的 Front Matter 会跳过该文件
- 解析错误会在控制台显示详细信息
- 不会影响其他正常文章的处理

## 🔍 故障排除

### 常见问题

**Q: 新文章没有显示？**
A: 确保运行了 `npm run sync-blog` 并重启了开发服务器

**Q: Front Matter 格式错误？**
A: 检查 YAML 语法，确保缩进和引号正确

**Q: 图片不显示？**
A: 确保图片路径正确，从 `/public` 目录开始

**Q: 标签颜色不对？**
A: 标签颜色是自动分配的，基于标签名称的哈希值

### 调试方法
1. 检查控制台输出的错误信息
2. 验证 Markdown 文件的 Front Matter 格式
3. 确认文件路径和权限
4. 查看生成的 `lib/blog-data.ts` 文件

## 📈 扩展功能

### 未来计划
- [ ] 图片自动优化
- [ ] 自动生成目录
- [ ] 文章内链接检查
- [ ] SEO 自动优化
- [ ] 多语言支持

### 自定义扩展
您可以修改 `lib/blog-sync.ts` 来添加自定义功能：
- 自定义标签颜色规则
- 修改阅读时间计算方式
- 添加新的 Front Matter 字段
- 自定义文件过滤规则

---

## 📞 支持

如果您在使用过程中遇到问题，请：
1. 查看控制台错误信息
2. 检查文件格式和路径
3. 参考示例文章的格式
4. 查阅本文档的故障排除部分

**祝您使用愉快！** 🎉 